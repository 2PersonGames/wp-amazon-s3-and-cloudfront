!function(a){a(document).ready(function(){function b(){var b=a(".as3cf-bucket-list");b.html('<li class="loading">'+b.attr("data-working")+"</li>");var c={action:"as3cf-get-buckets",_nonce:as3cf_i18n.get_buckets_nonce};a.ajax({url:ajaxurl,type:"POST",dataType:"JSON",data:c,error:function(a,c,d){b.html(""),alert(as3cf_i18n.get_buckets_error+d)},success:function(c){b.html(""),"undefined"!=typeof c.success?(c.can_write===!1&&a(".as3cf-can-write-error").show(),a(c.buckets).each(function(a,c){b.append('<li><a href="#" data-bucket="'+c.Name+'"><span class="dashicons dashicons-portfolio"></span> '+c.Name+"</a></li>")})):alert(as3cf_i18n.get_buckets_error+c.error)}}),b.on("click","a",function(c){c.preventDefault(),b.addClass("saving");var d={action:"as3cf-save-bucket",bucket_name:a(this).attr("data-bucket"),_nonce:as3cf_i18n.save_bucket_nonce};a.ajax({url:ajaxurl,type:"POST",dataType:"JSON",data:d,error:function(a,c,d){b.removeClass("saving"),alert(as3cf_i18n.save_bucket_error+d)},success:function(c){b.removeClass("saving"),"undefined"!=typeof c.success?a(".as3cf-settings").addClass("as3cf-has-bucket"):alert(as3cf_i18n.save_bucket_error+c.error)}})})}a(".as3cf-settings").each(function(){var c=a(this);c.hasClass("as3cf-has-bucket")||b();var d=c.find(".as3cf-create-bucket-form");if(d.length){var e=d.find("button"),f=e.text();d.on("submit",function(b){b.preventDefault(),e.text(e.attr("data-working"));var c={action:"as3cf-create-bucket",bucket_name:d.find('input[name="bucket_name"]').val(),_nonce:as3cf_i18n.create_bucket_nonce};a.ajax({url:ajaxurl,type:"POST",dataType:"JSON",data:c,error:function(a,b,c){e.text(f),alert(as3cf_i18n.create_bucket_error+c)},success:function(b){e.text(f),"undefined"!=typeof b.success?a(".as3cf-settings").addClass("as3cf-has-bucket"):alert(as3cf_i18n.create_bucket_error+b.error)}})})}})})}(jQuery);